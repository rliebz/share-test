<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title></title>
</head>
<body>

<textarea id='pad' autofocus>Connecting...</textarea>

<!-- These will be served using express -->
<script src="http://localhost:7007/channel/bcsocket.js"></script>
<script src="http://localhost:7007/text.js"></script>
<script src="http://localhost:7007/share.js"></script>

<script>
    var socket = new BCSocket(null, {reconnect: true});
    var sjs = new sharejs.Connection(socket);

    var doc = sjs.get('docs', 'hello');

    // Subscribe to changes
    doc.subscribe();

    // This will be called when we have a live copy of the server's data.
    doc.whenReady(function() {
      console.log('doc ready, data: ', doc.getSnapshot());

      // Create a text document if one does not exist
      if (!doc.type) doc.create('text');

      doc.attachTextarea(document.getElementById('pad'));
    });
</script>

</body>
</html>